---
title: SwipeRefreshLayoutä¸‹æ‹‰åˆ·æ–°
date: 2022-03-13 19:54:32
permalink: /pages/35c375/
categories:
  - Component
  - RecyclerView
tags:
  - 
---
## SwipeRefreshLayoutç”¨æ³•

![recycler_refresh](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-later/202203121838345.gif)

SwipeRefreshLayoutæœ¬èº«ç»§æ‰¿ä¸ViewGroupã€‚æ‰€ä»¥åªéœ€è¦å°†ä»–åƒä¸€èˆ¬çš„ViewGroupä¸€æ ·ç”¨å°±å¥½äº†

```jsx
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">

    <androidx.swiperefreshlayout.widget.SwipeRefreshLayout
        android:id="@+id/swipeLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/recycler_view"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:background="#ced6e0" />
    </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>

</LinearLayout>
```

åœ¨onCreate()ä¸­è°ƒç”¨**pullRefresh()**

```java
private void pullRefresh() {
    // è®¾ç½®æ‰‹æŒ‡åœ¨å±å¹•ä¸‹æ‹‰å¤šå°‘è·ç¦»ä¼šè§¦å‘ä¸‹æ‹‰åˆ·æ–°
    mSwipeLayout.setDistanceToTriggerSync(300);
    // è®¾å®šä¸‹æ‹‰åœ†åœˆçš„èƒŒæ™¯
    mSwipeLayout.setProgressBackgroundColorSchemeColor(Color.WHITE);
    // è®¾å®šä¸‹æ‹‰åœ†åœˆçš„èƒŒæ™¯
    mSwipeLayout.setSize(SwipeRefreshLayout.LARGE); // è®¾ç½®åœ†åœˆçš„å¤§å°
    //è®¾ç½®ä¸‹æ‹‰åˆ·æ–°çš„ç›‘å¬
    mSwipeLayout.setOnRefreshListener(MainActivity.this);
}
```

å®ç°`onRefresh()`æ–¹æ³•

```java
/**
 * å½“ä¸‹æ‹‰åˆ·æ–°åè§¦å‘
 */
@Override
public void onRefresh() {
    mSwipeLayout.setEnabled(true);
    // æ£€æŸ¥æ˜¯å¦å¤„äºåˆ·æ–°çŠ¶æ€
    if (!isRefresh) {
        isRefresh = true;
        new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                // æ˜¾ç¤ºæˆ–éšè—åˆ·æ–°è¿›åº¦æ¡
                mSwipeLayout.setRefreshing(false);
                // ä¿®æ”¹adapterçš„æ•°æ®
                dataList.add(0, new ItemData("è¿™æ˜¯æ–°æ·»åŠ çš„æ•°æ®", R.mipmap.ic_launcher));
                mAdapter.notifyDataSetChanged();
                mSwipeLayout.setEnabled(false);
            }
        }, 4000);
    }
}
```

åœ¨RecyclerViewçš„åŸºç¡€ç”¨æ³•ä¸­æ·»åŠ ä¸Šè¿°æ–¹æ³•å³å¯

> [ğŸ§±å®Œæ•´ä»£ç Demo](https://github.com/IQQcode/MobileCoding/tree/main/Android-Core/03-Components/RecyclerView/RefreshAndLoad/RCLoadAndRefresh/02refresh)





---

ã€æ–‡ç« å‚è€ƒã€‘

[1]. wizardev-æ˜é‡‘. è‡ªå·±åŠ¨æ‰‹å†™RecyclerViewçš„ä¸‹æ‹‰åˆ·æ–°. https://juejin.cn/post/6844903518428479496

