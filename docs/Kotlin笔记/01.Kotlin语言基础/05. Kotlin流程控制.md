---
title:  Kotlinæµç¨‹æ§åˆ¶
date: 2021-06-02 09:13:29
permalink: /pages/487be4/
categories:
  - Kotlinç¬”è®°
  - Kotlinè¯­è¨€åŸºç¡€
tags:
  - kotlin
author:
  name: iqqcode
  link: https://github.com/IQQcode
---
ã€å‚è€ƒæ–‡æ¡£ã€‘

- [ğŸˆKotlin å¾ªç¯æ§åˆ¶](https://www.runoob.com/kotlin/kotlin-loop-control.html)



----------------

## 1. forå¾ªç¯

### for-å…ƒç´ éå†

```kotlin
for (item in array) { // å…ƒç´ éå†
    print(item )
    // 1 2 3 4 5
}
```



Java `for-each`å¾ªç¯

```java
for (item : list)
```

> Kotlinä¹Ÿèƒ½ä½¿ç”¨ç±»ä¼¼å½¢å¼çš„å¾ªç¯ï¼ŒåŒºåˆ«åœ¨äºæŠŠå†’å· `:` æ¢æˆäº†å…³é”®å­— `in`ï¼Œå…·ä½“è¯­å¥å½¢å¦‚ `for (item in list)`

ä¸‹é¢æ˜¯Kotlinå¯¹æ•°ç»„è¿›è¡Œå¾ªç¯å¤„ç†çš„ä»£ç ä¾‹å­ï¼š

```kotlin
fun main(args: Array<String>) {
    val poemArray: Array<String> = arrayOf("æœè¾ç™½å¸å½©äº‘é—´", "åƒé‡Œæ±Ÿé™µä¸€æ—¥è¿˜", "ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½", "è½»èˆŸå·²è¿‡ä¸‡é‡å±±")

    for (item in poemArray) {
        print("$item,\n")
    }

    println("========================\n")
    
    for (i in poemArray.indices) {
        if (i % 2 == 0)  println("${poemArray[i]}ï¼Œ") 
        else println("${poemArray[i]}ã€‚")
    }
}
```

### forå¾ªç¯â€”ä¸‹æ ‡éå†

Kotlin `in` å…³é”®å­—ä¹Ÿå¯ä»¥æ›¿ä»£`for-i`å¾ªç¯

```kotlin
for (i in poemArray.indices) { }

for (i in array.indices) {  // æ ¹æ®ä¸‹æ ‡å†å–å‡ºå¯¹åº”ä½ç½®çš„å…ƒç´ 
    println(i.toString() + "->" + array[i])=
    // 0->1
    // 1->2,
    // 2->3,
    // 3->4,
    // 4->5
}
```

ç„¶è€Œå–æ¶ˆ `for (åˆå§‹; æ¡ä»¶; å¢å‡)` è¿™ä¸ªè§„åˆ™æ˜¯æœ‰ä»£ä»·çš„ï¼Œå› ä¸ºå®é™…å¼€å‘ä¸­å¾€å¾€å­˜åœ¨éåŒä¸€èˆ¬çš„éœ€æ±‚ï¼Œæ¯”å¦‚ä»¥ä¸‹å‡ ç§æƒ…å†µï¼ŒKotlinçš„ `for (i in array.indices)` è¯­å¥å°±æ— æ³•å¾ˆå¥½åœ°å¤„ç†ï¼š

1. å¦‚ä½•è®¾å®šæ¡ä»¶åˆ¤æ–­çš„èµ·å§‹å€¼å’Œç»ˆæ­¢å€¼ï¼Ÿ
2. æ¯æ¬¡å¾ªç¯ä¹‹åçš„é€’å¢å€¼ä¸æ˜¯1çš„æ—¶å€™è¦æ€ä¹ˆåŠï¼Ÿ
3. å¾ªç¯æ–¹å‘ä¸æ˜¯é€’å¢è€Œæ˜¯é€’å‡ï¼Œåˆå¦‚ä½•æ˜¯å¥½ï¼Ÿ
4. ä¸æ¡ä»¶åˆ¤æ–­æœ‰å…³çš„å˜é‡ä¸æ­¢ä¸€ä¸ªï¼Œå’‹æ•´ï¼Ÿ
5. å¾ªç¯è¿‡ç¨‹ä¸­çš„å˜é‡ï¼Œåœ¨å¾ªç¯ç»“æŸåè¿˜èƒ½ä¸èƒ½ä½¿ç”¨ï¼Ÿ

é’ˆå¯¹ä»¥ä¸Šæƒ…å†µï¼Œå…¶å®Kotlinä¹Ÿç»™å‡ºäº†å‡ ä¸ªè§£å†³åŠæ³•ï¼Œä»£ä»·æ˜¯å¤šäº†è¯¸å¦‚ **untilã€stepã€downTo** è¿™æ ·çš„å…³é”®å­—ï¼Œå…·ä½“ç”¨æ³•è§ä¸‹åˆ—ä»£ç ï¼š

```kotlin
// å·¦é—­å³å¼€åŒºé—´ [11, 66)ï¼Œåˆæ³•å€¼åŒ…æ‹¬11ï¼Œä½†ä¸åŒ…æ‹¬66
for (i in 11 until 66) { ... }

// æ¯æ¬¡é»˜è®¤é€’å¢1ï¼Œè¿™é‡Œæ”¹ä¸ºæ¯æ¬¡é€’å¢4
for (i in 23..89 step 4) { ... }

// forå¾ªç¯é»˜è®¤é€’å¢ï¼Œè¿™é‡Œä½¿ç”¨downToè¡¨ç¤ºé€’å‡
for (i in 50 downTo 7) { ... }
```

> å¯æ˜¯è¿™äº›è§£å†³åŠæ³•å¹¶ä¸å®Œç¾ï¼Œå› ä¸ºä¸šåŠ¡éœ€æ±‚æ˜¯åƒå˜ä¸‡åŒ–çš„ï¼Œå¹¶éé™å®šåœ¨å‡ ç§å›ºå®šæ¨¡å¼ã€‚åŒæ—¶ï¼Œä»¥ä¸Šè§„åˆ™å®¹æ˜“ä½¿äººæ··æ·†ï¼Œä¸€æ—¦æ²¡ææ¸…untilå’ŒdownToçš„å¼€é—­åŒºé—´ï¼Œåœ¨åˆ¤æ–­è¾¹ç•Œå€¼æ—¶ä¼šäº§ç”Ÿé—®é¢˜ã€‚æ‰€ä»¥æ›´çµæ´»çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šèµ·æ­¢æ•°å€¼ã€æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯æ–¹å‘ä¸é€’å¢å€¼éƒ½åº”å½“åœ¨ä»£ç ä¸­æ˜ç¡®æŒ‡å®šï¼Œ`for (åˆå§‹; æ¡ä»¶; å¢å‡)` è¿™ä¸ªè§„åˆ™å›ºç„¶åºŸé™¤äº†ï¼Œä½†å¼€å‘è€…ä¾æ—§èƒ½å¤Ÿä½¿ç”¨whileè¯­å¥å®ç°ç›¸å…³åŠŸèƒ½

### forå¾ªç¯â€”éå†å…ƒç´ (å¸¦ç´¢å¼•)

```kotlin
for ((index, item) in array.withIndex()) {  // åŒæ—¶éå†ä¸‹æ ‡ å’Œ å…ƒç´ 
    println("$index->$item")
    // 0->1
    // 1->2
    // 2->3
    // 3->4
    // 4->5
}
```

### forEachéå†æ•°ç»„

```kotlin
array.forEach {
    println(it)
    // 1
    // 2
    // 3
    // 4
    // 5
}
```

### forEachå¢å¼ºç‰ˆ

```kotlin
array.forEachIndexed { index, item ->
    println("$indexï¼š$item")
    // 0:1
    // 1:2
    // 2:3
    // 3:4
    // 4:5
}
```



### forå¾ªç¯ä½¿ç”¨å°ç»“

```kotlin
for (i in 1..4) print(i)  // æ‰“å°ç»“æœä¸º: "1234"
```

å¦‚æœä½ éœ€è¦æŒ‰ååºéå†æ•´æ•°å¯ä»¥ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„ downTo() å‡½æ•°: 

> ï¼ˆä¹Ÿå¯ä»¥å…ˆarray.reverse()ç¿»è½¬ï¼‰

```kotlin
for (i in 4 downTo 1) print(i)  // æ‰“å°ç»“æœä¸º: "4321"
```

ä¹Ÿæ”¯æŒæŒ‡å®šæ­¥é•¿ï¼š

```kotlin
for (i in 1..4 step 2) print(i) // æ‰“å°ç»“æœä¸º: "13"

for (i in 4 downTo 1 step 2) print(i) // æ‰“å°ç»“æœä¸º: "42"
```

å¦‚æœå¾ªç¯ä¸­ä¸è¦æœ€åä¸€ä¸ªèŒƒå›´åŒºé—´çš„å€¼å¯ä»¥ä½¿ç”¨ until å‡½æ•°:

```kotlin
for (i in 1 until 10) { // i in [1, 10), ä¸åŒ…å« 10
     println(i)
}
```

<br>

## 2. Whileå¾ªç¯è¢«ä¿ç•™

**whileå¾ªç¯**

```kotlin
val poemArray: Array<String> = arrayOf("æœè¾ç™½å¸å½©äº‘é—´", "åƒé‡Œæ±Ÿé™µä¸€æ—¥è¿˜", "ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½", "è½»èˆŸå·²è¿‡ä¸‡é‡å±±")
    val poem: String = ""
    var i: Int = 0
    while (i < poemArray.size) {
        if (i % 2 == 0) {
            println("${poemArray[i]}ï¼Œ")
        } else {
            println("${poemArray[i]}ã€‚")
        }
        i++
    }
    println("${poem}è¯¥è¯—æ­Œä¸€å…±æœ‰${i}å¥ã€‚")
```

**do...whileå¾ªç¯ï¼šåŒJava**

-----------------------------------

## 3. å®ä¾‹æµ‹è¯•

å‰é¢çš„å¾ªç¯å¤„ç†å…¶å®éƒ½è¿˜ä¸­è§„ä¸­çŸ©ï¼Œåªæœ‰å†…å¿§æ²¡æœ‰å¤–æ‚£ï¼Œä½†è¦æ˜¯æ•°ç»„é‡Œçš„è¯—å¥æœ¬èº«å°±ä¸å®Œå–„ï¼Œæ¯”å¦‚æœ‰ç©ºæŒ‡é’ˆã€æœ‰ç©ºä¸²ã€æœ‰ç©ºæ ¼ä¸²ã€æœ‰å¤šä½™ä¸²ç­‰ç­‰ï¼Œæ­¤æ—¶å°±å¾—è¿›è¡Œè¯—å¥çš„åˆæ³•æ€§åˆ¤æ–­ï¼Œå¦‚æ­¤æ–¹å¯è¾“å‡ºæ­£å¸¸çš„è¯—æ­Œæ–‡å­—ã€‚åˆæ³•æ€§åˆ¤æ–­ä¸»è¦ç”±ä¸¤å—ä»£ç ç»„æˆï¼š

1. å¦‚æœå‘ç°æœ‰ç©ºæŒ‡é’ˆã€æœ‰ç©ºä¸²ã€æœ‰ç©ºæ ¼ä¸²ï¼Œåˆ™å¿½ç•¥æ­¤è¡Œï¼Œå³ä½¿ç”¨å…³é”®å­—continueç»§ç»­ä¸‹ä¸ªå¾ªç¯ï¼›
2. å¦‚æœåˆæ³•è¯—å¥è¾¾åˆ°å››å¥ï¼Œåˆ™ä¸ç®¡æ˜¯å¦éå†å®Œæˆï¼Œç›´æ¥æ‹¼å¥½ç»å¥å¹¶ç»“æŸå¾ªç¯ï¼Œå³ä½¿ç”¨å…³é”®å­—breakè·³å‡ºå¾ªç¯ï¼›åŠ å…¥äº†åˆæ³•æ€§åˆ¤æ–­çš„ä»£ç è§ä¸‹ï¼Œä¸»è¦æ¼”ç¤ºäº†`continue` å’Œ `break`ï¼š

```kotlin
fun main(args: Array<String>) {
    val poemArray: Array<String?> = 
    arrayOf("æœè¾ç™½å¸å½©äº‘é—´", null, "åƒé‡Œæ±Ÿé™µä¸€æ—¥è¿˜", "", "ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½", "   ", "è½»èˆŸå·²è¿‡ä¸‡é‡å±±", "é€å­Ÿæµ©ç„¶ä¹‹å¹¿é™µ")
    
    var pos: Int = -1
    var count: Int = 0
    while (pos <= poemArray.size) {
        pos++
        if (poemArray[pos].isNullOrBlank())
            continue
        if (count % 2 == 0) {
            println("${poemArray[pos]}ï¼Œ")
        } else {
            println("${poemArray[pos]}ã€‚")
        }
        count++
        if (count == 4)
            break
    }
}
```



## 4. gotoè¯­å¥ï¼Œæ ‡ç­¾å¤„è¿”å›

å¤–å±‚å¾ªç¯åŠ ä¸ª@æ ‡è®°

```kotlin
fun main(args: Array<String>) {
    val poemArray: Array<String?> = 
    arrayOf("æœè¾ç™½å¸å½©äº‘é—´", null, "åƒé‡Œæ±Ÿé™µä¸€æ—¥è¿˜", "", "ä¸¤å²¸çŒ¿å£°å•¼ä¸ä½", "   ", "è½»èˆŸå·²è¿‡ä¸‡é‡å±±", "é€å­Ÿæµ©ç„¶ä¹‹å¹¿é™µ")
    
    var i: Int = 0
    var is_found = false
    outside@ while (i < poemArray.size) {
        var j: Int = 0
        val item = poemArray[i];
        if (item != null) {
            while (j < item.length) {
                if (item[j] == 'ä¸€') {
                    is_found = true
                    break@outside
                }
                j++
            }
        }
        i++
    }
    println(if (is_found) "æˆ‘æ‰¾åˆ°'ä¸€'å­—å•¦" else "æ²¡æœ‰æ‰¾åˆ°'ä¸€'å­—å‘€")
}
```

### æ ‡ç­¾å¤„è¿”å›

Kotlin æœ‰å‡½æ•°å­—é¢é‡ã€å±€éƒ¨å‡½æ•°å’Œå¯¹è±¡è¡¨è¾¾å¼ã€‚å› æ­¤ Kotlin çš„å‡½æ•°å¯ä»¥è¢«åµŒå¥—ã€‚ æ ‡ç­¾é™åˆ¶çš„ return å…è®¸æˆ‘ä»¬ä»å¤–å±‚å‡½æ•°è¿”å›ã€‚ æœ€é‡è¦çš„ä¸€ä¸ªç”¨é€”å°±æ˜¯ä» lambda è¡¨è¾¾å¼ä¸­è¿”å›ã€‚å›æƒ³ä¸€ä¸‹æˆ‘ä»¬è¿™ä¹ˆå†™çš„æ—¶å€™ï¼š

```kotlin
fun foo() {
    ints.forEach {
        if (it == 0) return
        print(it)
    }
}
```

è¿™ä¸ª return è¡¨è¾¾å¼ä»æœ€ç›´æ¥åŒ…å›´å®ƒçš„å‡½æ•°å³ foo ä¸­è¿”å›ã€‚ ï¼ˆæ³¨æ„ï¼Œè¿™ç§éå±€éƒ¨çš„è¿”å›åªæ”¯æŒä¼ ç»™å†…è”å‡½æ•°çš„ lambda è¡¨è¾¾å¼ã€‚ï¼‰ å¦‚æœæˆ‘ä»¬éœ€è¦ä» lambda è¡¨è¾¾å¼ä¸­è¿”å›ï¼Œæˆ‘ä»¬å¿…é¡»ç»™å®ƒåŠ æ ‡ç­¾å¹¶ç”¨ä»¥é™åˆ¶ returnã€‚

```kotlin
fun foo() {
    ints.forEach lit@ {
        if (it == 0) return@lit
        print(it)
    }
}
```

ç°åœ¨ï¼Œå®ƒåªä¼šä» lambda è¡¨è¾¾å¼ä¸­è¿”å›ã€‚é€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨éšå¼æ ‡ç­¾æ›´æ–¹ä¾¿ã€‚ è¯¥æ ‡ç­¾ä¸æ¥å—è¯¥ lambda çš„å‡½æ•°åŒåã€‚

```kotlin
fun foo() {
    ints.forEach {
        if (it == 0) return@forEach
        print(it)
    }
}
```

æˆ–è€…ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªåŒ¿åå‡½æ•°æ›¿ä»£ lambda è¡¨è¾¾å¼ã€‚ åŒ¿åå‡½æ•°å†…éƒ¨çš„ return è¯­å¥å°†ä»è¯¥åŒ¿åå‡½æ•°è‡ªèº«è¿”å›

```kotlin
fun foo() {
    ints.forEach(fun(value: Int) {
        if (value == 0) return
        print(value)
    })
}
```

å½“è¦è¿”ä¸€ä¸ªå›å€¼çš„æ—¶å€™ï¼Œè§£æå™¨ä¼˜å…ˆé€‰ç”¨æ ‡ç­¾é™åˆ¶çš„ returnï¼Œå³

```kotlin
return@a 1
```

æ„ä¸º"ä»æ ‡ç­¾ @a è¿”å› 1"ï¼Œè€Œä¸æ˜¯"è¿”å›ä¸€ä¸ªæ ‡ç­¾æ ‡æ³¨çš„è¡¨è¾¾å¼ (@a 1)"ã€‚

<br>

----------------------

<br>



## 5. RangeèŒƒå›´è¡¨è¾¾å¼

### .. è¿ç®—ç¬¦

åŒç‚¹è¿ç®—ç¬¦ï¼Œç®€åŒ–äº†å¯¹èŒƒå›´çš„è¡¨è¾¾

```kotlin
fun main(args: Array<String>) {
    
    // è¿™ä¸ªèŒƒå›´è¡¨ç¤ºäº†ä» 1 åˆ° 10 
    val res = 1..10
}
```

### downToè¡¨è¾¾è¿ç®—ç¬¦

**downTo**æ­£å¥½æ˜¯ä¸åŒç‚¹è¿ç®—ç¬¦æ˜¯ç›¸åçš„

```kotlin
// è¿™ä¸ªèŒƒå›´è¡¨ç¤ºäº†ä» 10 åˆ° 1
val res = 10 downTo 1
```

æ­¥é•¿ä¸º2çš„downTo è¡¨è¾¾è¿ç®—ç¬¦

```kotlin
 // è¿™ä¸ªèŒƒå›´è¡¨ç¤ºäº†ä» 10 åˆ° 1,ä½†æ˜¯æ­¥é•¿ä¸º 2ï¼šå³ 10ã€8ã€6ã€4ã€2
val res = 10 downTo 1 step 2 
```

### èŒƒå›´è¡¨è¾¾å¼ä¹Ÿå¯è¡¨ç¤ºè¿ç»­çš„å­—ç¬¦ä¸²

```kotlin
 // è¿™ä¸ªèŒƒå›´è¡¨ç¤ºäº†ä» a åˆ° z : "a","b","c","d"...."z"
 val res = "a".."z"
```

### å¯ä»¥ä½¿ç”¨å…³é”®å­— in åˆ¤æ–­èŒƒå›´åŒ¹é…

```kotlin
 // è¿™ä¸ªèŒƒå›´è¡¨ç¤ºäº†ä» a åˆ° z : "a","b","c","d"...."z"
 val res = "a".."z"
 val contains = "a" in res
```

### èŒƒå›´è¡¨è¾¾å¼ä¹Ÿå¯ä»¥å†™ä½œå¯¹è±¡çš„æ–¹æ³•

```kotlin
    // è¿™ä¸ªèŒƒå›´è¡¨ç¤ºäº†ä» 1 åˆ° 10
    val r5 = 1.rangeTo(10)

    // è¿™ä¸ªèŒƒå›´è¡¨ç¤ºäº†ä» 10 åˆ° 1
    val r6 = 10.downTo(1)
```





<br>

## 6. Whenè¡¨è¾¾å¼

kotlinçš„whenå…¶å®å°±æ˜¯å¯¹javaçš„switchçš„ä¸€ä¸ªå‡çº§

switchåˆ†æ”¯è¯­å¥

```java
String ans = "B";
switch (ans) {
    case "A":
        // TODO
        break;
    case "B":
        // TODO
        break; 
    default:
        break;
}
```

whenåˆ†æ”¯è¯­å¥

```kotlin
String ans = "A";
when (ans) {
    "A" -> {
        // TODO
    }
    "B" -> {
        // TODO
    }
    else -> {
        // TODO
    }
}
```

å½“æˆ‘ä»¬çš„éœ€è¦çš„åˆ†æ”¯æšä¸¾å®Œæ¯•ï¼Œå¯ä»¥ä½¿ç”¨ **else** æŒ‡å‘é»˜è®¤åˆ†æ”¯

```kotlin
fun main(args: Array<String>) {
    val x = 7
    val numbersList = arrayListOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
    when (x) {
        in 1..5 -> println("x is in range of 1 to 10")
        in numbersList -> print("x in numbersList range")
        else -> print("X is not in the range and its value of x is $x")
    }
}
```

### ä¸å†™breakçš„case

```kotlin
fun main(args: Array<String>) {
    val x = 1
    val numbersList = arrayListOf(1, 2, 3, 4, 5, 6, 7, 8, 9, 10)
    when (x) {
        in 1..10 -> println("x is in range of 1 to 10") 
        in numbersList -> print("x in numbersList range") // æ­¤å¤„ä¸ä¼šæ‰§è¡Œ
        else -> print("X is not in the range and its value of x is $x")
    }
}

>>> output: x is in range of 1 to 10
```



**ä¸å†™breakçš„è¯ä¼šæ¥ç€æ‰§è¡Œä¸‹ä¸€ä¸ªcaseè¿›è¡Œæ¯”è¾ƒä¹ˆï¼Ÿ**

- **ä¸æ˜¯çš„ï¼Œè¿™ä¸ªwhençš„ç»“æœæ˜¯åªä¼šæ‰§è¡Œå½“å‰åˆ†æ”¯çš„å†…å®¹ï¼Œåè·³å‡ºå½“å‰when**

å¦‚ä½•åƒjavaä¸€æ ·ä¸å†™breakçš„è¯ä¼šæ‰§è¡Œå¤šä¸ªå‘¢ï¼Ÿ

```kotlin
var num = 6;
when (num) {
    in 1..20 -> {
        // TODO
    }
}

var res = "null"
when (res) {
    is String -> {
        // TODO
    }
}
```

> - is å°±æ˜¯ Javaçš„ `instanceof`
> -  as å°±æ˜¯ç”¨æ¥å¼ºåˆ¶ç±»å‹è½¬æ¢çš„

### ç»“åˆèŒƒå›´è¡¨è¾¾å¼

### èŒƒå›´è¡¨è¾¾å¼å–é

```kotlin
fun main(args: Array<String>) {
    val x = 15
    when (x) {
        !in 10..20 -> print("x is outside the range")
        else -> print("none of the above")
    }
}

>>> output: none of the above
```



### whenè¡¨è¾¾å¼åµŒå¥—è¯­å¥ç¤ºä¾‹

```kotlin
fun main(args: Array<String>) {
    val x = 10
    val y = 7
    val z = 20
    val result = when (z) {
        20 -> {
            println("if z id 20 then doing the sum of x and y")
            x + y
        }
        30 -> {
            println("if z id 30 then subtracting y from x")
            x - y
        }
        else -> "none of the value matched"
    }
    println("The result is $result")
}

>>> output: if z id 20 then doing the sum of x and y
The result is 17
```







--------------

ã€åŸæ–‡è½¬è½½ã€‘ï¼š

[1] aqi00. Kotlinå…¥é—¨(7)å¾ªç¯è¯­å¥çš„æ“ä½œ[EB/OL]. https://www.cnblogs.com/aqi00/p/7192967.html

[2] è‹—å°å¸…. Kotlinä¹‹æµç¨‹æ§åˆ¶[EB/OL]. https://www.jianshu.com/p/01eaac5f8767