![image-20210608152421367](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210608152421.png)

## 1. ProgressBarè¿›åº¦æ¡

ProgressBar(è¿›åº¦æ¡)æ˜¯AndroidåŸºæœ¬UIæ§ä»¶ä¸­çš„ï¼ŒProgressBarçš„åº”ç”¨åœºæ™¯å¾ˆå¤šï¼Œæ¯”å¦‚ ç”¨æˆ·ç™»å½•æ—¶ï¼Œåå°åœ¨å‘è¯·æ±‚ï¼Œä»¥åŠç­‰å¾…æœåŠ¡å™¨è¿”å›ä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™ä¼šç”¨åˆ°è¿›åº¦æ¡ï¼›æˆ–è€…å½“åœ¨è¿›è¡Œä¸€äº›æ¯”è¾ƒ è€—æ—¶çš„æ“ä½œï¼Œéœ€è¦ç­‰å¾…ä¸€æ®µè¾ƒé•¿çš„æ—¶é—´ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæ²¡æœ‰æç¤ºï¼Œç”¨æˆ·å¯èƒ½ä¼šä»¥ä¸ºç¨‹åºCarshæˆ–è€…æ‰‹æœºæ­»æœºäº†ï¼Œè¿™æ ·ä¼šå¤§å¤§é™ä½ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥åœ¨éœ€è¦è¿›è¡Œè€—æ—¶æ“ä½œçš„åœ°æ–¹ï¼Œæ·»åŠ ä¸Šè¿›åº¦æ¡ï¼Œè®©ç”¨æˆ·çŸ¥é“å½“å‰çš„ç¨‹åºåœ¨æ‰§è¡Œä¸­ï¼Œä¹Ÿå¯ä»¥ç›´è§‚çš„å‘Šè¯‰ç”¨æˆ·å½“å‰ä»»åŠ¡çš„æ‰§è¡Œè¿›åº¦ç­‰ï¼

**å¸¸ç”¨å±æ€§è¯¦è§£ï¼š**

| android:max                   | è¿›åº¦æ¡çš„æœ€å¤§å€¼                                               |
| ----------------------------- | ------------------------------------------------------------ |
| android:progressDrawable      | è®¾ç½®è½¨é“å¯¹åº”çš„Drawableå¯¹è±¡                                   |
| android:indeterminate         | å¦‚æœè®¾ç½®æˆtrueï¼Œåˆ™è¿›åº¦æ¡ä¸ç²¾ç¡®æ˜¾ç¤ºè¿›åº¦                       |
| android:indeterminateDrawable | è®¾ç½®ä¸æ˜¾ç¤ºè¿›åº¦çš„è¿›åº¦æ¡çš„Drawableå¯¹è±¡                         |
| android:indeterminateDuration | è®¾ç½®ä¸ç²¾ç¡®æ˜¾ç¤ºè¿›åº¦çš„æŒç»­æ—¶é—´                                 |
| android:secondaryProgress     | äºŒçº§è¿›åº¦æ¡ï¼Œç±»ä¼¼äºè§†é¢‘æ’­æ”¾çš„ä¸€æ¡æ˜¯å½“å‰æ’­æ”¾è¿›åº¦ï¼Œä¸€æ¡æ˜¯ç¼“å†²è¿›åº¦ï¼Œå‰è€…é€šè¿‡progresså±æ€§è¿›è¡Œè®¾ç½® |
å¯¹åº”çš„å†Javaä¸­æˆ‘ä»¬å¯è°ƒç”¨ä¸‹è¿°æ–¹æ³•ï¼š

- `getMax()`ï¼šè¿”å›è¿™ä¸ªè¿›åº¦æ¡çš„èŒƒå›´çš„ä¸Šé™
- `getProgress()`ï¼šè¿”å›è¿›åº¦
- `getSecondaryProgress()`ï¼šè¿”å›æ¬¡è¦è¿›åº¦
- `incrementProgressBy(int diff)`ï¼šæŒ‡å®šå¢åŠ çš„è¿›åº¦
- `isIndeterminate()`ï¼šæŒ‡ç¤ºè¿›åº¦æ¡æ˜¯å¦åœ¨ä¸ç¡®å®šæ¨¡å¼ä¸‹
- `setIndeterminate(boolean indeterminate)`ï¼šè®¾ç½®ä¸ç¡®å®šæ¨¡å¼ä¸‹

**ç³»ç»Ÿé»˜è®¤è¿›åº¦æ¡ä½¿ç”¨å®ä¾‹ï¼š**

<img src="https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210608164742.gif" style="zoom:67%;" />

```xml
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity">

    <!-- ç³»ç»Ÿæä¾›çš„åœ†å½¢è¿›åº¦æ¡,ä¾æ¬¡æ˜¯å¤§ä¸­å° -->

    <ProgressBar
        style="@android:style/Widget.ProgressBar.Small"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <ProgressBar
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <ProgressBar
        style="@android:style/Widget.ProgressBar.Large"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <!--ç³»ç»Ÿæä¾›çš„æ°´å¹³è¿›åº¦æ¡-->
    <ProgressBar
        style="@android:style/Widget.ProgressBar.Horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:max="100"
        android:progress="18" />

    <ProgressBar
        style="@android:style/Widget.ProgressBar.Horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:indeterminate="true" />

</LinearLayout>
```

<br>

### 1.1 åŠ¨ç”»æ¥æ›¿ä»£åœ†å½¢è¿›åº¦æ¡

ä½¿ç”¨ä¸€å¥—è¿ç»­å›¾ç‰‡ï¼Œå½¢æˆä¸€ä¸ªå¸§åŠ¨ç”»ï¼Œå½“éœ€è¦è¿›åº¦å›¾çš„æ—¶å€™ï¼Œè®©åŠ¨ç”»å¯è§ï¼Œä¸éœ€è¦çš„æ—¶å€™è®©åŠ¨ç”»ä¸å¯è§å³å¯ï¼

[ğŸ”—è¿›åº¦æ¡ç´ æå›¾ç‰‡](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/%E8%BF%9B%E5%BA%A6%E6%9D%A1%E5%8A%A8%E7%94%BB%E7%B4%A0%E6%9D%90%E6%89%93%E5%8C%85.zip)

å®šä¹‰ä¸€ä¸ªAnimationDrawableæ–‡ä»¶ï¼šåœ¨drawableç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªamin_pgbar.xmlçš„èµ„æºæ–‡ä»¶ï¼š

```xml
<?xml version="1.0" encoding="utf-8"?>  
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"  
    android:oneshot="false" >  
  
    <item  
        android:drawable="@drawable/loading_01"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_02"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_03"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_04"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_05"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_06"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_07"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_08"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_09"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_10"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_11"  
        android:duration="200"/>  
    <item  
        android:drawable="@drawable/loading_12"  
        android:duration="200"/>  
  
</animation-list> 
```

### 1.2 ç®€å•è‡ªå®šä¹‰Processbar

![img](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img-2021-befo/20210614223925.png)

**æ ·å¼style**

```xml
<ProgressBar
    style="@style/Widget.AppCompat.ProgressBar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:max="100"/>
```

**ç³»ç»Ÿæ˜¯é»˜è®¤æ ·å¼æœ‰**

`style="@style/Widget.AppCompat.ProgressBar"`åœ†å½¢è¿›åº¦

`style="@style/Widget.AppCompat.ProgressBar.Horizontal"`æ°´å¹³è¿›åº¦æ¡

**åœ¨res/values/stylesé‡Œè¾¹æ–°å»º**

```xml
 <style name="update_progress_horizontal" parent="Widget.AppCompat.ProgressBar.Horizontal">
    <item name="android:indeterminateOnly">false</item>
    <!--è¿›åº¦æ¡çš„è¿›åº¦é¢œè‰²drawableæ–‡ä»¶-->
    <item name="android:progressDrawable">@drawable/progress_indeterminate_horizontal</item>
    <!--è¿›åº¦æ¡çš„æœ€å°é«˜åº¦-->
    <item name="android:minHeight">17dp</item>
    <!--è¿›åº¦æ¡çš„æœ€å¤§é«˜åº¦-->
    <item name="android:maxHeight">17dp</item>
</style>
```

**ç„¶åå†ProgressBarä¸­å¼•ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„æ ·å¼å°±å¯ä»¥äº†ã€‚**

```swift
  <ProgressBar
  style="@style/update_progress_horizontal"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:max="100"/>
```

`update_progress_horizontal`å…¶ä¸­çš„`android:progressDrawable`æˆ‘ä»¬å¯ä»¥è‡ªå·±å®šä¹‰è¿›åº¦æ¡çš„é¢œè‰²ã€‚

åœ¨res/drawableä¸‹æ–°å»ºprogress_indeterminate_horizontalæ–‡ä»¶ï¼ˆlayer-listç±»å‹çš„ï¼‰

```xml
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<!--æœªåŠ è½½çš„è¿›åº¦åŒºåŸŸ-->
<item android:id="@android:id/background">
    <shape>
        <!--è¿›åº¦æ¡çš„åœ†è§’-->
        <corners android:radius="15dip" />
        <!--æœªåŠ è½½çš„è¿›åº¦åŒºåŸŸé¢œè‰²-->
        <solid android:color="#FFDBDBDB"/>
    </shape>
</item>
<!--ç¼“å†²çš„è¿›åº¦çš„é¢œè‰²ï¼Œä¸€èˆ¬è§†é¢‘æ’­æ”¾çš„ç¼“å†²åŒºåŸŸ-->
<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
            <!--è¿›åº¦æ¡çš„åœ†è§’-->
            <corners android:radius="15dip" />
            <!--ç¼“å†²çš„è¿›åº¦çš„é¢œè‰²ï¼Œä¸€èˆ¬è§†é¢‘æ’­æ”¾çš„ç¼“å†²è¿›åº¦-->
            <solid android:color="#80C07AB8"/>
        </shape>
    </clip>
</item>
<!--å·²ç»åŠ è½½å®Œçš„è¿›åº¦çš„åŒºåŸŸ-->
<item android:id="@android:id/progress">
    <clip>
        <shape>
            <!--è¿›åº¦æ¡çš„åœ†è§’-->
            <corners android:radius="15dip" />
            <!--å·²ç»åŠ è½½å®Œçš„è¿›åº¦çš„é¢œè‰²-->
            <solid android:color="#FF706EB3"/>
        </shape>
    </clip>
</item>
</layer-list>
```

<br>

## 2. å¤æ‚è‡ªå®šä¹‰ProgressBar

- [ğŸ¤¡è‡ªå®šä¹‰View--ProgressBarç¯‡ï¼ˆä¸€ï¼‰](https://www.jianshu.com/p/01e7d9c948e0)
- [ğŸ¤¦â€â™€ï¸å®šä¹‰View--ProgressBarç¯‡ï¼ˆäºŒï¼‰](https://www.jianshu.com/p/65b0f3a206f0)
- [è‡ªå®šä¹‰View--ProgressBarç¯‡ï¼ˆä¸‰ï¼‰](https://www.jianshu.com/p/a29896c33624)

**å¼€æºæ§ä»¶**

[lzyzsd](https://github.com/lzyzsd) / **[CircleProgress](https://github.com/lzyzsd/CircleProgress)**

[EthanCo](https://github.com/EthanCo) / **[CircleProgress](https://github.com/EthanCo/CircleProgress)**

<br>







